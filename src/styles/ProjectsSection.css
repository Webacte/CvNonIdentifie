/* Section Expériences (étape 3) */

.experiences-section {
    overflow: hidden;
}

/* Habitation au centre : 3/4 de l'écran (rabaissée de 10 %) */
/* isolation: isolate pour que les z-index 0 / 1 / 2 s’appliquent bien entre eux */
.experiences-habitation-container {
    position: absolute;
    left: 50%;
    top: 59%;
    transform: translate(-50%, -50%);
    width: 75vw;
    height: 75vh;
    max-width: 75vw;
    max-height: 75vh;
    z-index: 20;
    isolation: isolate;
}

/* 768px : top 62.5%, width 100vw, left 70% (sol remonté à 65% sur mobile) */
@media (max-width: 768px) {
    .experiences-habitation-container {
        top: 50%;
        width: 100vw;
        left: 70%;
        max-width: 100vw;
    }
}

/* 769px à 900px : interpolation top ~65.5% */
@media (min-width: 769px) and (max-width: 900px) {
    .experiences-habitation-container {
        top: 65.5%;
        width: 100vw;
        left: 67.5%;
        max-width: 100vw;
    }
}

/* 901px à 1050px : interpolation top ~63.5% */
@media (min-width: 901px) and (max-width: 1050px) {
    .experiences-habitation-container {
        top: 63.5%;
        width: 100vw;
        left: 66%;
        max-width: 100vw;
    }
}

/* 1051px à 1200px : interpolation top ~61% */
@media (min-width: 1051px) and (max-width: 1200px) {
    .experiences-habitation-container {
        top: 61%;
        width: 100vw;
        left: 65.5%;
        max-width: 100vw;
    }
}

/* 1201px à 1348px : interpolation top ~60% */
@media (min-width: 1201px) and (max-width: 1348px) {
    .experiences-habitation-container {
        top: 60%;
        width: 100vw;
        left: 65%;
        max-width: 100vw;
    }
}

/* 1349px et plus : top 59%, width 100vw, left 65% */
@media (min-width: 1349px) {
    .experiences-habitation-container {
        top: 59%;
        width: 100vw;
        left: 65%;
        max-width: 100vw;
    }
}

/* Mobile 425px et moins : sol à 55% → habitation et éléments remontés de 10% en proportion */
@media (max-width: 425px) {
    .experiences-habitation-container {
        top: 46%;
        left: 74%;
        width: 112.5vw;
        height: 112.5vh;
        max-width: 112.5vw;
        max-height: 112.5vh;
    }
}

.experiences-habitation-layer {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.experiences-habitation-layer svg {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* Ordre d’empilement : back (0) → masques (1) → front (2) */
.experiences-habitation-back {
    z-index: 0;
}

.experiences-habitation-front {
    z-index: 2;
}

/* Masques strictement entre z-index 0 et 2 */
.experiences-mask {
    position: absolute;
    z-index: 1;
    background-color: #e6dbbd;
    pointer-events: none;
}

/* Masque cheminée (chemine-fumee translate(0, 200) → zone bas centre-gauche du viewBox 1722×512) */
/* Base : écrans larges (1350px et plus) */
.experiences-mask-chemine {
    left: 5%;
    width: 14%;
    bottom: 35%;
    height: 42%;
    --cut: 140px;
    -webkit-clip-path: polygon(var(--cut) 25%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
    clip-path: polygon(var(--cut) 25%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
}

/* Interpolation entre 320px (bottom 44%, height 25%, clip 29%) et base (35%, 42%, 25%) */
@media (max-width: 1349px) {
    .experiences-mask-chemine {
        bottom: 28%;
        height: 50%;
        -webkit-clip-path: polygon(var(--cut) 19%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
        clip-path: polygon(var(--cut) 19%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
    }
}

@media (max-width: 768px) {
    .experiences-mask-chemine {
        bottom: 37%;
        height: 43%;
        -webkit-clip-path: polygon(var(--cut) 27%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
        clip-path: polygon(var(--cut) 27%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
    }
}

@media (max-width: 480px) {
    .experiences-mask-chemine {
        bottom: 42%;
        height: 28%;
        -webkit-clip-path: polygon(var(--cut) 28%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
        clip-path: polygon(var(--cut) 28%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
    }
}

@media (max-width: 425px) {
    .experiences-mask-chemine {
        bottom: 53%;
        height: 27%;
        -webkit-clip-path: polygon(var(--cut) 28.5%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
        clip-path: polygon(var(--cut) 28.5%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
    }
}

@media (max-width: 320px) {
    .experiences-mask-chemine {
        bottom: 44%;
        height: 25%;
        -webkit-clip-path: polygon(var(--cut) 29%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
        clip-path: polygon(var(--cut) 29%, 100% 0, 100% 100%, 0 100%, 0 var(--cut));
    }
}

/* Masque convoyeur (ensemble-convoyeur translate(-700, 0) → bande gauche du viewBox) */
/* Base : idéal vers 1349px */
.experiences-mask-convoyeur {
    left: 23.5%;
    width: 45%;
    bottom: 25%;
    height: 20%;
}

/* Tablettes / écrans moyens : entre 769px et 1348px (à 1349px et plus → base 25% / 20%) */
@media (min-width: 769px) and (max-width: 1348px) {
    .experiences-mask-convoyeur {
        bottom: 30%;
        height: 17%;
    }
}

/* Mobile / petit écran : idéal à 768px */
@media (max-width: 768px) {
    .experiences-mask-convoyeur {
        bottom: 34%;
        height: 14%;
    }
}

/* Très petit écran : ajustement fin */
@media (max-width: 480px) {
    .experiences-mask-convoyeur {
        bottom: 36%;
        height: 12%;
    }
}

/* Mobile ≤425px : masque convoyeur remonté en proportion du sol (sol à 55%) */
@media (max-width: 425px) {
    .experiences-mask-convoyeur {
        bottom: 46%;
        height: 12%;
    }
}

/* Extraterrestre à gauche (alien2) - flip horizontal */
.experiences-extraterrestre-container.alien2 {
    position: absolute;
    left: 2vw;
    top: 60%;
    transform: translateY(-50%) scaleX(-1);
    width: 120px;
    height: auto;
    z-index: 20;
    overflow: visible;
}

.experiences-extraterrestre-container svg {
    width: 100%;
    height: auto;
    overflow: visible;
}

/* Titre "Expériences" */
.experiences-title {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 4;
}

.experiences-title h2 {
    font-family: 'SP-Caffeine', sans-serif;
    font-size: 2rem;
    font-weight: 10;
    margin: 0;
}

@media (max-width: 768px) {
    .experiences-extraterrestre-container {
        width: 80px;
        left: 1vw;
    }
}

@media (max-width: 480px) {
    .experiences-extraterrestre-container {
        width: 60px;
    }

    .experiences-title h2 {
        font-size: 1.5rem;
    }
}

/* 425px et moins : alien2 remonté en proportion du sol (sol à 55%) */
@media (max-width: 425px) {
    .experiences-extraterrestre-container.alien2 {
        top: 53%;
        width: 40px;
    }
}
